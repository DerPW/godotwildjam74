[gd_scene load_steps=13 format=4 uid="uid://cs0kq3cv1m4n8"]

[ext_resource type="Script" path="res://scripts/level.gd" id="1_peq4q"]
[ext_resource type="PackedScene" uid="uid://dlu8bglbmfh5w" path="res://scenes/key.tscn" id="2_3vxps"]
[ext_resource type="Resource" path="res://data/inv_item_key_iron.tres" id="3_jm6in"]
[ext_resource type="PackedScene" uid="uid://dhiqybqm31mnk" path="res://scenes/door.tscn" id="4_s6v4s"]
[ext_resource type="TileSet" uid="uid://eid1v56ko2s7" path="res://data/walls_tileset.tres" id="5_4u7se"]
[ext_resource type="Texture2D" uid="uid://b0y70cvq62u76" path="res://assets/tilesets/entities_dungeons.png" id="6_uea6o"]
[ext_resource type="PackedScene" uid="uid://crokx0nfwsok0" path="res://scenes/candle.tscn" id="7_stvle"]
[ext_resource type="Shader" path="res://shader/godrays.gdshader" id="8_ok6wo"]
[ext_resource type="PackedScene" uid="uid://bhkilugsmedsn" path="res://scenes/Switch.tscn" id="9_fm0w8"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_g5ncw"]
texture = ExtResource("6_uea6o")
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
1:1/0 = 0
2:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
1:3/0 = 0
2:3/0 = 0
3:0/0 = 0
3:1/0 = 0
0:1/0 = 0
3:2/0 = 0
3:3/0 = 0

[sub_resource type="TileSet" id="TileSet_ablov"]
sources/0 = SubResource("TileSetAtlasSource_g5ncw")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_4cj5f"]
shader = ExtResource("8_ok6wo")
shader_parameter/angle = 0.435
shader_parameter/position = 0.2
shader_parameter/spread = 0.443
shader_parameter/cutoff = 0.0640001
shader_parameter/falloff = 0.2
shader_parameter/edge_fade = 0.15
shader_parameter/speed = 5.0
shader_parameter/ray1_density = 8.0
shader_parameter/ray2_density = 30.0
shader_parameter/ray2_intensity = 0.3
shader_parameter/color = Color(0.0117647, 0.027451, 0.0392157, 1)
shader_parameter/hdr = true
shader_parameter/seed = 5.0

[node name="Level1" type="Node2D"]
script = ExtResource("1_peq4q")

[node name="Key" parent="." instance=ExtResource("2_3vxps")]
position = Vector2(480, 144)
item = ExtResource("3_jm6in")

[node name="PlayerSpawnPoint" type="Node2D" parent="."]
position = Vector2(296, 144)

[node name="Door" parent="." instance=ExtResource("4_s6v4s")]
position = Vector2(112, 136)
key = ExtResource("3_jm6in")

[node name="Walls" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("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AAAKAAUAAQALAAAAAAAKAAYAAQAGAAEAAAALAAYAAQAKAAAAAAAMAAYAAQAKAAAAAAANAAYAAQAKAAAAAAAOAAYAAQAFAAEAAAAOAAUAAQAIAAAAAAAPAAUAAQALAAAAAAAUAAYAAQAFAAAAAAAVAAUAAQAIAAAAAAAWAAUAAQAKAAAAAAAXAAUAAQAFAAEAAAAXAAQAAQAIAAAAAAAYAAQAAQALAAAAAAAYAAUAAQAGAAEAAAAZAAUAAQAKAAAAAAAaAAUAAQALAAAAAAAaAAYAAQAGAAEAAAAbAAYAAQAKAAAAAAAcAAYAAQAKAAAAAAAdAAYAAQAFAAEAAAAdAAUAAQAIAAAAAAAeAAUAAQAKAAAAAAAfAAUAAQALAAAAAAAfAAYAAQALAAEAAAAgAAYAAQADAAMAAAAeAAYAAQAJAAIAAAAZAAYAAQAJAAIAAAAYAAYAAQAJAAIAAAAXAAYAAQAJAAIAAAAWAAYAAQAJAAIAAAAVAAYAAQAFAAEAAAAQAAYAAQAGAAAAAAAPAAYAAQAGAAEAAAAJAAYAAQAJAAIAAAAIAAYAAQAJAAIAAAAHAAYAAQAJAAIAAAARAAYAAQACAAMAAAASAAYAAQACAAMAAAATAAYAAQACAAMAAAAgAA8AAQABAAAAAAAhABIAAQAKAAAAAAAiABIAAQAKAAAAAAAjABIAAQAKAAAAAAAEAAsAAQAFAAMAAAAEAAYAAQAIAAEAAAAFAAUAAQAKAAAAAAAEAAUAAQAIAAAAAAABAAgAAQADAAMAAAADAAsAAQABAAMAAAAGAAQAAQAIAAAAAAAHAAQAAQAKAAAAAAAIAAQAAQALAAAAAAAFAAEAAQALAAMAAAAEAAEAAQAGAAIAAAAEAAIAAQALAAMAAAADAAIAAQAJAAMAAAACAAIAAQAGAAIAAAACAAMAAQALAAMAAAABAAMAAQAGAAIAAAABAAQAAQALAAMAAAABAAIAAQAJAAIAAAABAAEAAQAJAAIAAAACAAEAAQAJAAIAAAADAAEAAQAJAAIAAAAKAAEAAQAIAAMAAAALAAEAAQAFAAIAAAALAAIAAQAIAAMAAAAMAAIAAQAJAAMAAAANAAIAAQAJAAMAAAAOAAIAAQAJAAMAAAAPAAIAAQAJAAMAAAAQAAIAAQALAAMAAAAQAAEAAQAGAAIAAAARAAEAAQAJAAMAAAASAAEAAQAJAAMAAAATAAEAAQAJAAMAAAAUAAEAAQAJAAMAAAAVAAEAAQAJAAMAAAAWAAEAAQAJAAMAAAAXAAEAAQAJAAMAAAAYAAEAAQAJAAMAAAAZAAEAAQAJAAMAAAAaAAIAAQAIAAMAAAAbAAIAAQAJAAMAAAAcAAIAAQAJAAMAAAAdAAIAAQAJAAMAAAAeAAIAAQAJAAMAAAAfAAIAAQAJAAMAAAAgAAIAAQAJAAMAAAAhAAIAAQAFAAIAAAAiAAIAAQAJAAIAAAAjAAIAAQAJAAIAAAAjAAMAAQAJAAIAAAAjAAQAAQAJAAIAAAAjAAUAAQAJAAMAAAAiAAUAAQAIAAMAAAAiAAQAAQAIAAEAAAAiAAMAAQAFAAIAAAAhAAMAAQAIAAMAAAAaAAEAAQAFAAIAAAAbAAEAAQAJAAIAAAAcAAEAAQAJAAIAAAAdAAEAAQAJAAIAAAAeAAEAAQAJAAIAAAAfAAEAAQAJAAIAAAAgAAEAAQAJAAIAAAAhAAEAAQAJAAIAAAAiAAEAAQAJAAIAAAAjAAEAAQAJAAIAAAAOAAEAAQAJAAIAAAANAAEAAQAJAAIAAAAMAAEAAQAJAAIAAAAPAAEAAQAJAAIAAAAKABAAAQALAAAAAAAJABAAAQAIAAAAAAAJABEAAQAFAAEAAAAIABEAAQAIAAAAAAAIABIAAQAIAAEAAAAIABMAAQAIAAMAAAAJABQAAQAIAAMAAAAKABQAAQALAAMAAAAKABMAAQAGAAIAAAALABMAAQALAAMAAAALABIAAQALAAIAAAALABEAAQALAAAAAAAKABEAAQAGAAEAAAAJABIAAQAJAAIAAAAJABMAAQAFAAIAAAAKABIAAQAJAAIAAAASABMAAQAAAAAAAAASABQAAQAJAAAAAAARABQAAQAIAAAAAAARABUAAQAIAAEAAAARABYAAQAIAAMAAAASABYAAQALAAMAAAASABUAAQAGAAIAAAATABUAAQALAAMAAAATABQAAQALAAAAAAASAA4AAQAAAAEAAAASAA8AAQACAAEAAAASAA0AAQAAAAAAAAASABAAAQAAAAIAAAAZABQAAQAIAAMAAAAaABQAAQAJAAMAAAAbABQAAQALAAMAAAAcABMAAQALAAMAAAAcABIAAQALAAIAAAAcABEAAQALAAAAAAAbABEAAQAKAAIAAAAbABAAAQALAAAAAAAaABAAAQAKAAAAAAAZABAAAQAIAAAAAAAYABEAAQAIAAAAAAAYABIAAQAIAAEAAAAYABMAAQAIAAMAAAAZABEAAQAJAAEAAAAZABIAAQALAAIAAAAZABMAAQAKAAIAAAAaABMAAQAKAAAAAAAaABEAAQAJAAMAAAAbABMAAQAJAAEAAAAbABIAAQAIAAEAAAAhAA8AAQACAAMAAAAiAA8AAQACAAMAAAAjAA8AAQACAAMAAAARAA8AAQABAAMAAAATAA8AAQADAAMAAAAAABQAAQAIAAEAAAABABQAAQAJAAIAAAACABQAAQAJAAIAAAADABQAAQAJAAIAAAAEABQAAQALAAIAAAAEABUAAQALAAMAAAADABUAAQAJAAMAAAACABUAAQAJAAMAAAABABUAAQAJAAMAAAAAABUAAQAIAAMAAAAgABQAAQAIAAEAAAAhABQAAQAJAAIAAAAiABQAAQAJAAIAAAAjABQAAQAJAAIAAAAkABQAAQALAAIAAAAkABUAAQALAAMAAAAjABUAAQAJAAMAAAAiABUAAQAJAAMAAAAhABUAAQAJAAMAAAAgABUAAQAIAAMAAAA=")
tile_set = ExtResource("5_4u7se")

[node name="Background" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAAYAAoAAAAAAAAAAAAMAAoAAAAAAAAAAAAHAAYAAAACAAIAAAAiAAMAAAAAAAIAAAAHAAMAAAAAAAAAAAAeAAQAAAACAAAAAAAUAAEAAAABAAAAAAAUAAIAAAABAAEAAAAQAAgAAAADAAAAAAAUAAgAAAADAAEAAAAUAAcAAAAAAAEAAAAQAAcAAAABAAAAAAAjAAEAAAABAAIAAAAKABIAAAABAAMAAAABAAEAAAACAAMAAAAPAAEAAAACAAMAAAAdAAEAAAABAAMAAAAYAAYAAAABAAIAAAACAAsAAAACAAAAAAACAA0AAAACAAAAAAADABIAAAACAAAAAAAKAAkAAAACAAAAAAAQABAAAAACAAEAAAAQABEAAAACAAAAAAARABMAAAACAAEAAAASABEAAAACAAEAAAATAAkAAAACAAAAAAAVABEAAAACAAEAAAAXABIAAAACAAAAAAAaAAoAAAACAAEAAAAaAAsAAAACAAAAAAAbAAgAAAACAAAAAAAeABQAAAACAAEAAAAfABIAAAACAAAAAAAJAA0AAAACAAEAAAAKAAsAAAACAAEAAAAPAAQAAAACAAAAAAASAAUAAAACAAEAAAAUAAMAAAACAAAAAAAZAAIAAAACAAEAAAAbAAQAAAACAAEAAAAjAAsAAAACAAEAAAAHABQAAAACAAEAAAAOAA0AAAACAAAAAAACAAQAAAACAAEAAAAaABIAAAAAAAAAAAABAA0AAAADAAMAAAAiAA0AAAADAAIAAAA=")
tile_set = SubResource("TileSet_ablov")

[node name="Candles" type="Node" parent="."]

[node name="Candle" parent="Candles" instance=ExtResource("7_stvle")]
position = Vector2(200, 168)

[node name="Candle2" parent="Candles" instance=ExtResource("7_stvle")]
position = Vector2(392, 168)

[node name="Candle3" parent="Candles" instance=ExtResource("7_stvle")]
position = Vector2(40, 288)

[node name="Candle4" parent="Candles" instance=ExtResource("7_stvle")]
position = Vector2(552, 288)

[node name="Candle6" parent="Candles" instance=ExtResource("7_stvle")]
position = Vector2(424, 296)

[node name="Candle8" parent="Candles" instance=ExtResource("7_stvle")]
position = Vector2(200, 168)

[node name="Candle9" parent="Candles" instance=ExtResource("7_stvle")]
position = Vector2(392, 168)

[node name="Candle10" parent="Candles" instance=ExtResource("7_stvle")]
position = Vector2(488, 72)

[node name="Candle11" parent="Candles" instance=ExtResource("7_stvle")]
position = Vector2(328, 40)

[node name="Candle12" parent="Candles" instance=ExtResource("7_stvle")]
position = Vector2(120, 56)

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Godrays" type="ColorRect" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_4cj5f")
anchors_preset = -1
anchor_left = 0.0138889
anchor_top = -0.6
anchor_right = 0.0138889
anchor_bottom = -0.546875
offset_left = 448.0
offset_top = 192.0
offset_right = 512.0
offset_bottom = 264.0
scale = Vector2(1.01429, 1.88508)
color = Color(1, 1, 1, 0)
metadata/_edit_use_anchors_ = true

[node name="Switch" parent="." node_paths=PackedStringArray("walls_tilemap_layer") instance=ExtResource("9_fm0w8")]
position = Vector2(552, 280)
walls_tilemap_layer = NodePath("../Walls")
wall_to_add = Array[Vector2i]([Vector2i(12, 11), Vector2i(24, 11), Vector2i(1, 14)])
wall_to_remove = Array[Vector2i]([Vector2i(17, 6), Vector2i(18, 6), Vector2i(19, 6)])

[node name="Switch2" parent="." node_paths=PackedStringArray("walls_tilemap_layer") instance=ExtResource("9_fm0w8")]
position = Vector2(56, 288)
walls_tilemap_layer = NodePath("../Walls")
wall_to_remove = Array[Vector2i]([Vector2i(33, 15), Vector2i(34, 15), Vector2i(35, 15)])

[connection signal="player_entered" from="Door" to="." method="_on_door_player_entered"]
