[gd_scene load_steps=14 format=4 uid="uid://dlrc20q3poc6u"]

[ext_resource type="Script" path="res://scripts/level.gd" id="1_y2cfn"]
[ext_resource type="PackedScene" uid="uid://dlu8bglbmfh5w" path="res://scenes/key.tscn" id="2_q4gft"]
[ext_resource type="Resource" path="res://data/inv_item_key_iron.tres" id="3_4e7xe"]
[ext_resource type="PackedScene" uid="uid://dhiqybqm31mnk" path="res://scenes/door.tscn" id="4_2apxq"]
[ext_resource type="TileSet" uid="uid://eid1v56ko2s7" path="res://data/walls_tileset.tres" id="5_wbixb"]
[ext_resource type="Texture2D" uid="uid://b0y70cvq62u76" path="res://assets/tilesets/entities_dungeons.png" id="6_yd3tx"]
[ext_resource type="PackedScene" uid="uid://crokx0nfwsok0" path="res://scenes/candle.tscn" id="7_v11if"]
[ext_resource type="Shader" path="res://shader/godrays.gdshader" id="8_mw5g3"]
[ext_resource type="PackedScene" uid="uid://bhkilugsmedsn" path="res://Switch.tscn" id="9_vtyaw"]
[ext_resource type="PackedScene" uid="uid://drqq7qe6mnqx0" path="res://scenes/boken_platform.tscn" id="10_3ah3h"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_g5ncw"]
texture = ExtResource("6_yd3tx")
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
1:1/0 = 0
2:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
1:3/0 = 0
2:3/0 = 0
3:0/0 = 0
3:1/0 = 0
0:1/0 = 0
3:2/0 = 0
3:3/0 = 0

[sub_resource type="TileSet" id="TileSet_ablov"]
sources/0 = SubResource("TileSetAtlasSource_g5ncw")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_4cj5f"]
shader = ExtResource("8_mw5g3")
shader_parameter/angle = 0.435
shader_parameter/position = 0.2
shader_parameter/spread = 0.443
shader_parameter/cutoff = 0.0640001
shader_parameter/falloff = 0.2
shader_parameter/edge_fade = 0.15
shader_parameter/speed = 5.0
shader_parameter/ray1_density = 8.0
shader_parameter/ray2_density = 30.0
shader_parameter/ray2_intensity = 0.3
shader_parameter/color = Color(0.0117647, 0.027451, 0.0392157, 1)
shader_parameter/hdr = true
shader_parameter/seed = 5.0

[node name="Level1" type="Node2D"]
script = ExtResource("1_y2cfn")

[node name="Key" parent="." instance=ExtResource("2_q4gft")]
position = Vector2(536, 48)
item = ExtResource("3_4e7xe")

[node name="PlayerSpawnPoint" type="Node2D" parent="."]
position = Vector2(88, 176)

[node name="Door" parent="." instance=ExtResource("4_2apxq")]
position = Vector2(544, 168)
key = ExtResource("3_4e7xe")

[node name="Walls" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAAjAAAAAQAKAAAAAAAiAAAAAQAKAAAAAAAhAAAAAQAKAAAAAAAgAAAAAQAKAAAAAAAfAAAAAQAKAAAAAAAeAAAAAQAKAAAAAAAdAAAAAQAFAAAAAAAcAAAAAQACAAMAAAAbAAAAAQACAAMAAAAaAAAAAQACAAMAAAAZAAAAAQAGAAAAAAAYAAAAAQAKAAAAAAAXAAAAAQAKAAAAAAAVAAAAAQAFAAAAAAAUAAAAAQACAAMAAAATAAAAAQACAAMAAAASAAAAAQACAAMAAAARAAAAAQACAAMAAAAQAAAAAQAGAAAAAAAPAAAAAQAKAAAAAAAOAAAAAQAKAAAAAAANAAAAAQAKAAAAAAAMAAAAAQAKAAAAAAAKAAAAAQAKAAAAAAAJAAAAAQAKAAAAAAAIAAAAAQAFAAAAAAAHAAAAAQACAAMAAAAGAAAAAQACAAMAAAAFAAAAAQACAAMAAAAEAAAAAQAGAAAAAAADAAAAAQAKAAAAAAACAAAAAQAKAAAAAAABAAAAAQAKAAAAAAAAABIAAQAAAAEAAAAAAA8AAQAAAAEAAAAAAA4AAQABAAEAAAAAAA0AAQAAAAEAAAAAAAwAAQAAAAEAAAAAAAsAAQAAAAEAAAAAAAoAAQAAAAEAAAAAAAkAAQAAAAEAAAAAAAgAAQABAAEAAAAAAAcAAQAAAAEAAAAAAAYAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAQAAQAEAAIAAAAAAAMAAQAIAAEAAAAAAAIAAQAIAAEAAAAAAAEAAQAIAAEAAAAAAAAAAQAIAAAAAAAkAAwAAQAAAAEAAAAkAAsAAQAAAAEAAAAkAAAAAQALAAAAAAAkAAEAAQALAAIAAAAkAAIAAQALAAIAAAAkAAMAAQALAAIAAAAkAAQAAQALAAIAAAAkAAUAAQALAAIAAAAkAAYAAQALAAIAAAAkAAcAAQALAAIAAAAkAAgAAQALAAIAAAAkAAkAAQAHAAIAAAAkAAoAAQAAAAEAAAAkAA8AAQAAAAEAAAAkABAAAQAAAAEAAAAkABEAAQAAAAEAAAAkABIAAQAAAAEAAAAkAA4AAQAAAAEAAAAkAA0AAQAAAAEAAAAWAAAAAQAKAAAAAAALAAAAAQAKAAAAAAAAABEAAQAAAAEAAAAAABAAAQAAAAEAAAAjABMAAQACAAMAAAAiABMAAQACAAMAAAAhABMAAQACAAIAAAAgABMAAQACAAMAAAAfABMAAQACAAMAAAAeABMAAQAGAAMAAAAdABMAAQAJAAMAAAAcABMAAQAJAAMAAAAbABMAAQAJAAMAAAAaABMAAQAJAAMAAAAZABMAAQAJAAMAAAAYABMAAQAJAAMAAAAXABMAAQAJAAMAAAAWABMAAQAJAAMAAAAVABMAAQAJAAMAAAAUABMAAQAJAAMAAAATABMAAQAJAAMAAAASABMAAQAJAAMAAAARABMAAQAJAAMAAAAQABMAAQAJAAMAAAAPABMAAQAJAAMAAAAOABMAAQAJAAMAAAANABMAAQAFAAMAAAAMABMAAQACAAMAAAALABMAAQACAAMAAAAKABMAAQACAAMAAAAJABMAAQACAAIAAAAIABMAAQACAAMAAAAHABMAAQACAAMAAAAGABMAAQACAAMAAAAFABMAAQACAAMAAAAEABMAAQACAAMAAAADABMAAQACAAMAAAACABMAAQACAAMAAAAAABMAAQABAAIAAAAkABMAAQADAAIAAAABABMAAQACAAMAAAADABEAAQAFAAMAAAADABAAAQAIAAEAAAAEAA8AAQAJAAIAAAAFAA4AAQALAAIAAAAGAA0AAQAJAAMAAAAHAAwAAQAKAAAAAAAIAAwAAQAKAAAAAAAJAAwAAQALAAAAAAAJABEAAQAHAAIAAAAJABAAAQALAAIAAAAJAA8AAQALAAIAAAAJAA4AAQALAAIAAAAJAA0AAQALAAIAAAAIABEAAQAJAAMAAAAIABAAAQAJAAIAAAAIAA8AAQAJAAIAAAAIAA4AAQAJAAIAAAAIAA0AAQAJAAIAAAAHABEAAQAJAAMAAAAHABAAAQAJAAIAAAAHAA8AAQAFAAEAAAAHAA4AAQAIAAEAAAAHAA0AAQAFAAIAAAAGABEAAQAJAAMAAAAGABAAAQAJAAIAAAAGAA8AAQAKAAAAAAAFABEAAQAJAAMAAAAFABAAAQAJAAIAAAAFAA8AAQAGAAEAAAAEABEAAQAJAAMAAAAEABAAAQAJAAIAAAAiAAwAAQALAAAAAAAhAAwAAQAIAAAAAAAiABAAAQALAAIAAAAiAA8AAQALAAIAAAAiAA4AAQALAAIAAAAiAA0AAQALAAIAAAAhABEAAQAEAAIAAAAhABAAAQAIAAEAAAAhAA8AAQAIAAEAAAAhAA4AAQAIAAEAAAAhAA0AAQAIAAEAAAAGAAwAAQAKAAAAAAAFAAwAAQAKAAAAAAAEAAwAAQAKAAAAAAADAAwAAQAEAAEAAAADAAsAAQADAAEAAAADAAoAAQAAAAEAAAAEAA4AAQAJAAIAAAAEAA0AAQAJAAIAAAADAA8AAQAIAAEAAAADAA4AAQAIAAEAAAADAA0AAQAIAAEAAAAFAA0AAQAGAAIAAAACABEAAQABAAMAAAABAA4AAQADAAMAAAACAAsAAQABAAMAAAABAAgAAQADAAMAAAAcABIAAQAGAAEAAAAbABIAAQAJAAIAAAAZABEAAQAKAAAAAAAYABEAAQAGAAEAAAAYABAAAQALAAAAAAAXABAAAQAKAAAAAAAWABAAAQAKAAAAAAAVABAAAQAIAAAAAAAVABEAAQAFAAEAAAAUABEAAQAKAAAAAAATABEAAQAIAAAAAAATABIAAQAFAAEAAAASABIAAQAKAAAAAAARABIAAQAKAAAAAAAQABIAAQAGAAEAAAAQABEAAQALAAAAAAAPABEAAQAIAAAAAAAPABIAAQAFAAEAAAAOABIAAQAKAAAAAAANABIAAQAIAAAAAAAUABIAAQAJAAIAAAAVABIAAQAJAAIAAAAWABEAAQAJAAIAAAAXABEAAQAJAAIAAAAWABIAAQAJAAIAAAAXABIAAQAJAAIAAAAYABIAAQAJAAIAAAAZABIAAQAJAAIAAAAaABIAAQAJAAIAAAAiABEAAQALAAMAAAAJABIAAQAAAAEAAAAeABIAAQALAAAAAAAdABIAAQAKAAAAAAADAAkAAQAAAAEAAAADAAgAAQAAAAEAAAADAAcAAQAAAAAAAAAhAAkAAQAIAAMAAAAiAAkAAQAJAAMAAAAjAAkAAQAJAAMAAAAhABIAAQAAAAEAAAAcABEAAQALAAAAAAAbABEAAQAKAAAAAAAaABEAAQAKAAAAAAAhAAgAAQAFAAIAAAAhAAcAAQAJAAIAAAAhAAYAAQAJAAIAAAAhAAUAAQAJAAIAAAAhAAQAAQAKAAAAAAAdAAEAAQAIAAMAAAAeAAEAAQAJAAMAAAAfAAEAAQAJAAMAAAAgAAEAAQAJAAMAAAAhAAEAAQAJAAMAAAAiAAEAAQAJAAMAAAAjAAEAAQAFAAIAAAAjAAIAAQAIAAEAAAAjAAMAAQAIAAEAAAAjAAQAAQAFAAEAAAAjAAUAAQAJAAIAAAAjAAYAAQAJAAIAAAAjAAcAAQAJAAIAAAAjAAgAAQAJAAIAAAAiAAgAAQAJAAIAAAAiAAcAAQAJAAIAAAAiAAYAAQAJAAIAAAAiAAUAAQAJAAIAAAAiAAQAAQAKAAAAAAAgAAQAAQAKAAAAAAAgAAUAAQAJAAIAAAAgAAYAAQAJAAIAAAAfAAYAAQAFAAIAAAAfAAUAAQAJAAIAAAAeAAUAAQAIAAEAAAAeAAQAAQAFAAAAAAAfAAQAAQAKAAAAAAAgAAcAAQAFAAIAAAAgAAgAAQAIAAMAAAAfAAcAAQAIAAMAAAAeAAYAAQAIAAMAAAAJAAYAAQAIAAMAAAAJAAUAAQAIAAIAAAAJAAQAAQAIAAAAAAAKAAQAAQAKAAAAAAALAAQAAQAKAAAAAAAMAAQAAQALAAAAAAANAAUAAQALAAAAAAANAAYAAQALAAMAAAAMAAYAAQAJAAMAAAALAAcAAQALAAMAAAAKAAcAAQAIAAMAAAAKAAYAAQAFAAIAAAASAAcAAQAIAAMAAAASAAYAAQAIAAEAAAASAAUAAQAIAAAAAAATAAUAAQAFAAEAAAATAAQAAQAIAAAAAAAUAAQAAQAKAAAAAAAVAAQAAQALAAAAAAAVAAUAAQALAAIAAAAWAAYAAQADAAMAAAAVAAYAAQALAAEAAAAVAAcAAQALAAMAAAAUAAcAAQAJAAMAAAATAAcAAQAJAAMAAAATAAYAAQAJAAIAAAAUAAUAAQAJAAIAAAAUAAYAAQAJAAIAAAAMAAUAAQAGAAEAAAALAAUAAQAJAAIAAAAKAAUAAQAJAAIAAAALAAYAAQAGAAIAAAACAAMAAQALAAIAAAABAAMAAQAJAAIAAAABAAQAAQAJAAMAAAACAAQAAQALAAMAAAAEAAEAAQALAAMAAAADAAEAAQAGAAIAAAACAAEAAQAJAAIAAAACAAIAAQAGAAIAAAABAAIAAQAJAAIAAAABAAEAAQAJAAIAAAADAAIAAQALAAMAAAAOAAEAAQAFAAIAAAAOAAIAAQAIAAMAAAAPAAIAAQAJAAMAAAAQAAEAAQALAAIAAAAPAAEAAQAJAAIAAAAQAAIAAQALAAMAAAANAAEAAQAJAAMAAAAMAAEAAQAJAAMAAAALAAEAAQAJAAMAAAAKAAEAAQAJAAMAAAAJAAEAAQAJAAMAAAAIAAEAAQAIAAMAAAAVAAEAAQAIAAMAAAAWAAEAAQAFAAIAAAAWAAIAAQAIAAMAAAAXAAIAAQAJAAMAAAAYAAIAAQAJAAMAAAAZAAIAAQALAAMAAAAZAAEAAQALAAIAAAAYAAEAAQAJAAIAAAAXAAEAAQAJAAIAAAAIAAUAAQACAAMAAAAHAAUAAQABAAMAAAAdAAQAAQABAAMAAAA=")
tile_set = ExtResource("5_wbixb")

[node name="Background" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAAGAA4AAAAAAAAAAAAEAAIAAAABAAEAAAATAAEAAAABAAEAAAAVAAgAAAABAAEAAAAVAAcAAAABAAAAAAATAAAAAAABAAAAAAAEAAEAAAABAAAAAAACAAUAAAADAAEAAAACAAQAAAAAAAEAAAAKAAsAAAADAAIAAAAKAAUAAAAAAAIAAAAaABIAAAABAAIAAAAXAAEAAAABAAIAAAAWABIAAAACAAMAAAAgAAUAAAACAAMAAAAjAAgAAAACAAMAAAABAAEAAAACAAMAAAAIABAAAAABAAMAAAAjAAUAAAABAAMAAAAUAAYAAAABAAMAAAAPAAEAAAABAAMAAAAhAAcAAAACAAIAAAAEAAYAAAACAAAAAAAIAAYAAAACAAAAAAALABAAAAACAAAAAAAMAA0AAAACAAEAAAAPAA8AAAACAAEAAAASAA8AAAACAAAAAAAVAA0AAAACAAEAAAAcAA8AAAACAAAAAAAfAA4AAAACAAAAAAATAAkAAAACAAAAAAALAAoAAAACAAEAAAALAAsAAAACAAEAAAAOAAoAAAACAAEAAAAQAAgAAAACAAEAAAAYAAkAAAACAAEAAAAaAAkAAAACAAEAAAAaAAsAAAACAAAAAAAXAAQAAAACAAEAAAALAAMAAAACAAEAAAAbAAQAAAACAAAAAAAIABIAAAACAAEAAAACABIAAAACAAAAAAACAA8AAAACAAEAAAABAAkAAAACAAAAAAA=")
tile_set = SubResource("TileSet_ablov")

[node name="Candles" type="Node" parent="."]

[node name="Candle" parent="Candles" instance=ExtResource("7_v11if")]
position = Vector2(568, 288)

[node name="Candle2" parent="Candles" instance=ExtResource("7_v11if")]
position = Vector2(104, 232)

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Godrays" type="ColorRect" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_4cj5f")
anchors_preset = -1
anchor_left = 0.0138888
anchor_top = -0.784375
anchor_right = 0.0138888
anchor_bottom = -0.784375
offset_left = 504.0
offset_top = 200.0
offset_right = 568.0
offset_bottom = 272.0
scale = Vector2(1.01429, 1.88508)
color = Color(1, 1, 1, 0)
metadata/_edit_use_anchors_ = true

[node name="Switch" parent="." node_paths=PackedStringArray("walls_tilemap_layer") instance=ExtResource("9_vtyaw")]
position = Vector2(568, 288)
walls_tilemap_layer = NodePath("../Walls")
wall_to_add = Array[Vector2i]([Vector2i(35, 12)])
wall_to_remove = Array[Vector2i]([Vector2i(9, 18), Vector2i(33, 18)])

[node name="BokenPlatform" parent="." instance=ExtResource("10_3ah3h")]
position = Vector2(200, 200)

[node name="BokenPlatform2" parent="." instance=ExtResource("10_3ah3h")]
position = Vector2(248, 200)
time_until_fall = 0.5

[node name="BokenPlatform3" parent="." instance=ExtResource("10_3ah3h")]
position = Vector2(296, 200)

[node name="BokenPlatform4" parent="." instance=ExtResource("10_3ah3h")]
position = Vector2(344, 200)
time_until_fall = 0.5

[node name="BokenPlatform5" parent="." instance=ExtResource("10_3ah3h")]
position = Vector2(392, 200)

[node name="BokenPlatform6" parent="." instance=ExtResource("10_3ah3h")]
position = Vector2(440, 200)
time_until_fall = 0.5

[node name="BokenPlatform7" parent="." instance=ExtResource("10_3ah3h")]
position = Vector2(488, 200)

[node name="BokenPlatform8" parent="." instance=ExtResource("10_3ah3h")]
position = Vector2(248, 120)

[node name="BokenPlatform9" parent="." instance=ExtResource("10_3ah3h")]
position = Vector2(424, 120)

[connection signal="player_entered" from="Door" to="." method="_on_door_player_entered"]
